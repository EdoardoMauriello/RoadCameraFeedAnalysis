<html>

<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);
    var data = {{data|safe}}
    var input_cars_up = {{ data[0] | safe }};
    var input_cars_down = {{ data[1] | safe }};
    var input_speed_up = {{ data[2] | safe }};
    var input_speed_down = {{ data[3] | safe }};
    
    
    function drawChart() {
      var data_cars_up = google.visualization.arrayToDataTable(input_cars_up);
      var data_cars_down = google.visualization.arrayToDataTable(input_cars_down);
      var data_speed_up = google.visualization.arrayToDataTable(input_speed_up);
      var data_speed_down = google.visualization.arrayToDataTable(input_speed_down);

      var options = {
        title: '',
        curveType: 'function',
        legend: { position: 'bottom' }
      };

      // Create and draw charts
      var chart1 = new google.visualization.BarChart(document.getElementById('chart_1'));
      chart1.draw(data_cars_up, options);

      var chart2 = new google.visualization.BarChart(document.getElementById('chart_2'));
      chart2.draw(data_cars_down, options);

      var chart3 = new google.visualization.BarChart(document.getElementById('chart_3'));
      chart3.draw(data_speed_up, options);

      var chart4 = new google.visualization.BarChart(document.getElementById('chart_4'));
      chart4.draw(data_speed_down, options);
    }
  </script>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
  <h1>Car traffic in {{loc_name}} {{direction}}</h1>
  <table>
    <tr>
      <th>
        <div id="chart_1" style="width: 350px; height: 250px"></div>
      </th>
      <th>
        <div id="chart_2" style="width: 350px; height: 250px"></div>
      </th>
    </tr>
    <tr>
      <th>
        <div id="chart_3" style="width: 350px; height: 250px"></div>
      </th>
      <th>
        <div id="chart_4" style="width: 350px; height: 250px"></div>
      </th>
    </tr>
  </table>
  <h1>Live traffic</h1>
  <video width="500" controls autoplay>
    <source src="{{camURL}}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</body>

</html>
